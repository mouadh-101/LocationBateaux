<button type="button"
  class="mb-6 px-5 py-2.5 bg-gray-200 text-gray-700 font-semibold rounded-lg shadow hover:bg-gray-300 transition duration-300"
  (click)="goBack()">
  ← Retour à la liste
</button>

<div class="max-w-5xl mx-auto p-6 bg-white rounded-3xl shadow-xl ring-1 ring-gray-300" *ngIf="!loading && boat">

  <!-- Titre -->
  <h2
    class="text-center text-4xl sm:text-5xl font-extrabold text-[#2563eb] mb-10 tracking-tight italic drop-shadow-sm select-none">
    {{ boat.nom }}
  </h2>




  <div class="flex flex-col md:flex-row gap-10">

    <!-- Slideshow avec boutons -->
    <!-- Container image -->
<div class="md:w-1/2 relative rounded-xl overflow-hidden shadow-lg select-none"
     style="height: 400px;"> <!-- hauteur fixe -->

  <!-- Image -->
  <img *ngIf="boat.images?.length" [src]="getCurrentImageUrl()" alt="{{ boat.nom }}"
       class="w-full h-full object-cover transition-transform duration-700 ease-in-out" />

  <!-- Placeholder s'il n'y a pas d'image -->
  <div *ngIf="!boat.images || boat.images.length === 0"
       class="flex items-center justify-center h-full bg-gray-100 text-gray-400 font-semibold text-lg rounded-xl">
    Pas d'image disponible
  </div>

</div>


    <!-- Infos principales en grille -->
    <div class="md:w-1/2 grid grid-cols-1 sm:grid-cols-2 gap-6">

      <!-- Description large -->
      <section
        class="sm:col-span-2 bg-blue-50 p-6 rounded-xl border border-blue-200 shadow-md flex flex-col justify-between">
        <h3 class="text-xl font-semibold text-[#2563eb] mb-3">Description</h3>
        <p class="text-gray-800 leading-relaxed whitespace-pre-line">{{ boat.description }}</p>
      </section>

      <!-- Prix -->
      <section
        class="bg-green-50 p-4 rounded-xl shadow-inner border border-green-200 flex flex-col items-center justify-center">
        <h4 class="font-semibold text-green-700 mb-1">Prix</h4>
        <p class="text-green-900 font-extrabold text-lg">{{ boat.prix }} TND / Jour</p>
      </section>

      <!-- Port -->
      <section
        class="bg-blue-50 p-4 rounded-xl shadow-inner border border-blue-200 flex flex-col items-center justify-center">
        <h4 class="font-semibold text-blue-700 mb-1">Port</h4>
        <p class="text-gray-900 font-medium">{{ boat.port.nom }}</p>
      </section>

      <!-- Type -->
      <section
        class="bg-yellow-50 p-4 rounded-xl shadow-inner border border-yellow-200 flex flex-col items-center justify-center">
        <h4 class="font-semibold text-yellow-700 mb-1">Type</h4>
        <p class="text-yellow-900 font-medium">{{ boat.carecteristique?.type }}</p>
      </section>

      <!-- Disponible -->
      <section
        class="bg-gray-50 p-4 rounded-xl shadow-inner border border-gray-200 flex items-center justify-between">
        <h4 class="font-semibold text-gray-700">Disponible</h4>
        <span
          class="px-3 py-1 rounded-full text-white text-sm font-semibold"
          [ngClass]="boat.disponible ? 'bg-green-600' : 'bg-red-600'">
          {{ boat.disponible ? 'Oui' : 'Non' }}
        </span>
      </section>

      <!-- Note -->
      <section
        class="bg-yellow-50 p-4 rounded-xl shadow-inner border border-yellow-200 flex items-center gap-3 text-yellow-600 font-semibold text-xl drop-shadow-sm select-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="currentColor" viewBox="0 0 24 24" stroke="none">
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
        </svg>
        <span>Note : {{ getAverageRating(boat) | number:'1.1-1' }}</span>
      </section>

      <!-- Types de réservation large -->
      <section
        class="sm:col-span-2 bg-white p-6 rounded-xl border border-gray-300 shadow-md select-none">
        <h4 class="text-lg font-semibold text-gray-800 mb-5">Types de réservation disponibles</h4>
        <div class="flex flex-wrap gap-4">

          <span *ngIf="boat.reservationTypeSettings.full_day_enabled"
            class="bg-blue-100 text-blue-800 text-sm font-semibold px-4 py-1 rounded-full shadow-sm select-none">
            Journée complète
            <span *ngIf="boat.reservationTypeSettings.fullDayPrice != null">
              – {{ boat.reservationTypeSettings.fullDayPrice }} TND
            </span>
          </span>

          <span *ngIf="boat.reservationTypeSettings.half_day_enabled"
            class="bg-purple-100 text-purple-800 text-sm font-semibold px-4 py-1 rounded-full shadow-sm select-none">
            Demi-journée
            <span *ngIf="boat.reservationTypeSettings.halfDayPrice != null">
              – {{ boat.reservationTypeSettings.halfDayPrice }} TND
            </span>
          </span>

          <span *ngIf="boat.reservationTypeSettings.two_hours_enabled"
            class="bg-teal-100 text-teal-800 text-sm font-semibold px-4 py-1 rounded-full shadow-sm select-none">
            2 heures
            <span *ngIf="boat.reservationTypeSettings.twoHoursPrice != null">
              – {{ boat.reservationTypeSettings.twoHoursPrice }} TND
            </span>
          </span>

        </div>
      </section>

      <!-- Commission large -->
      <section
        class="sm:col-span-2 flex items-center gap-4 bg-blue-50 border border-blue-200 rounded-2xl px-5 py-3 shadow-md transition hover:shadow-lg hover:bg-blue-100 cursor-default select-none">
        <div
          class="flex items-center justify-center w-7 h-7 rounded-full bg-blue-100 text-blue-600 text-lg">
          <i class="fas fa-coins"></i>
        </div>
        <p class="text-blue-800 font-semibold text-base">
          Commission : <span class="font-extrabold">{{ boat.commission }}%</span>
        </p>
      </section>
<!-- Bloc Services -->
<section *ngIf="boat.services?.length" class="sm:col-span-2 bg-white p-6 rounded-xl border border-gray-300 shadow-md select-none mt-6">
  <h4 class="text-lg font-semibold text-gray-800 mb-5">Services disponibles</h4>
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    <div *ngFor="let service of boat.services" class="flex items-start gap-3 p-4 bg-blue-50 rounded-lg shadow-sm border border-blue-100">
      <!-- Option icône -->
      <div *ngIf="service" class="text-3xl text-blue-600">
        <i [class]="service"></i>
      </div>

      <div>
        <h5 class="font-semibold text-blue-800">{{ service.nom }}</h5>

      </div>
    </div>
  </div>
</section>

    </div>

  </div>

</div>

<!-- Loading -->
<div *ngIf="loading" class="flex flex-col items-center justify-center h-48 text-gray-400">
  <svg class="animate-spin h-12 w-12 mb-4 text-gray-300" xmlns="http://www.w3.org/2000/svg" fill="none"
    viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
  </svg>
  <p class="text-lg font-semibold">Chargement...</p>
</div>

<!-- Erreur -->
<div *ngIf="error" class="max-w-xl mx-auto mt-10 text-center text-red-600 font-bold text-xl">
  {{ error }}
</div>
