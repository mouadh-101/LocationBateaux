<div *ngIf="loading" class="text-center text-blue-600 font-semibold py-6" role="alert" aria-live="polite">
  Loading reservation details...
</div>

<div *ngIf="error" class="text-center text-red-600 font-semibold py-6" role="alert" aria-live="assertive">
  {{ error }}
</div>

<div *ngIf="reservation" class="max-w-lg mx-auto bg-green-50 rounded-3xl shadow-lg p-8
         transition-colors duration-300 border border-green-200">
  <h2 class="text-4xl font-extrabold mb-8 text-green-900 border-b border-green-300 pb-4 flex items-center gap-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-9 w-9 text-green-600" fill="none" viewBox="0 0 24 24"
      stroke="currentColor" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-7 4h4m-6 4h8" />
    </svg>
    Reservation Details
  </h2>

  <dl class="grid grid-cols-1 sm:grid-cols-2 gap-6 text-green-900">
    <h3 id="reservation-info-title" class="text-2xl font-semibold mb-4 text-green-900 inline-flex items-center gap-2">
      <span class="inline-block">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-green-600" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
      </span>
      <span class="inline-block">Reservation Information</span>
    </h3><br>


    <!-- Date -->
    <div class="flex items-start gap-4 py-2 border-b border-gray-200 dark:border-gray-700">
      <!-- Titre -->
      <dt class="font-semibold text-gray-700 dark:text-gray-200 text-lg w-32">
        Date:
      </dt>

      <!-- Contenu -->
      <dd class="flex flex-col text-gray-900 dark:text-white font-medium">
        <time [attr.datetime]="reservation.date"
          [title]="reservation.date | date:'fullDate' + ' Ã  ' + (reservation.date | date:'shortTime')">
          <span class="text-base">{{ reservation.date | date:'fullDate' }}</span>
        </time>
        <span class="text-sm text-green-700 dark:text-green-400">
          {{ reservation.date | date:'shortTime' }}
        </span>
      </dd>
    </div>


    <!-- Type -->
    <div class="flex items-center gap-3 py-2 border-b border-gray-300 dark:border-gray-700">
      <dt class="font-semibold text-gray-900 dark:text-gray-100 text-lg w-28">
        Type:
      </dt>
      <dd>
        <span class="inline-block px-4 py-1 rounded-full font-semibold text-sm uppercase tracking-wide cursor-default
             border-2 shadow-sm
             transition transform duration-200 ease-in-out
             hover:scale-105 hover:shadow-lg" [ngClass]="{
        'border-green-500 text-green-700 bg-green-100 dark:bg-green-900 dark:text-green-300':
          reservation.typeReservation === 'FULL_DAY',
        'border-yellow-500 text-yellow-700 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300':
          reservation.typeReservation === 'HALF_DAY',
        'border-indigo-500 text-indigo-700 bg-indigo-100 dark:bg-indigo-900 dark:text-indigo-300':
          reservation.typeReservation === 'TWO_HOURS'
      }">
          {{
          reservation.typeReservation === 'FULL_DAY'
          ? 'Full Day'
          : reservation.typeReservation === 'HALF_DAY'
          ? 'Half Day'
          : 'Two Hours'
          }}
        </span>
      </dd>
    </div>

    <!-- Persons -->
    <div class="flex items-center gap-3 py-2 border-b border-gray-300 dark:border-gray-700">
      <dt class="font-semibold text-gray-900 dark:text-gray-100 text-lg w-28">
        Persons:
      </dt>
      <dd class="font-semibold text-indigo-700 dark:text-indigo-300 text-lg">
        {{ reservation.nbPersonnes }}
      </dd>
    </div>


    <!-- Status -->
    <div class="flex items-center gap-3 py-2">
      <dt class="font-semibold text-lg w-28 text-gray-900 dark:text-gray-100">Status:</dt>
      <dd>
        <span class="inline-block px-5 py-1 rounded-full font-semibold text-sm uppercase tracking-wide
             shadow-sm transition-all duration-300 cursor-default
             hover:shadow-lg hover:scale-105
             " [ngClass]="{
        'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300': reservation.status === 'EN_ATTENTE',
        'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-300': reservation.status === 'ACCEPTER',
        'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-300': reservation.status === 'REFUSER'
      }">
          {{ reservation.status }}
        </span>
      </dd>
    </div>

  </dl>

  <section class="mt-16 max-w-xl mx-auto bg-gradient-to-br from-green-50 via-green-100 to-green-200
         rounded-2xl shadow-lg p-10 border border-green-300" aria-labelledby="user-info-title">
    <h3 id="user-info-title" class="flex items-center gap-3 mb-10 text-3xl font-bold text-green-800">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-9 h-9 text-green-700" fill="none" viewBox="0 0 24 24"
        stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zM12 14c-4.418 0-8 1.79-8 4v2h16v-2c0-2.21-3.582-4-8-4z" />
      </svg>
      User Information
    </h3>

    <dl class="space-y-7 text-green-900 font-semibold">
      <div class="flex justify-between border-b border-green-400 pb-3">
        <dt class="text-lg">Name</dt>
        <dd class="text-lg truncate max-w-[60%]">{{ reservation.utilisateur?.name || 'N/A' }}</dd>
      </div>
      <div class="flex justify-between border-b border-green-400 pb-3">
        <dt class="text-lg">Email</dt>
        <dd class="text-lg break-words max-w-[60%]">{{ reservation.utilisateur?.email || 'N/A' }}</dd>
      </div>
      <div class="flex justify-between">
        <dt class="text-lg">Phone</dt>
        <dd class="text-lg">{{ reservation.utilisateur?.phone || 'N/A' }}</dd>
      </div>
    </dl>
  </section>


  <!-- Boat Info -->
  <section class="mt-12 border-t border-green-300 pt-6 max-w-xl mx-auto bg-green-50 rounded-xl shadow-md p-6"
    aria-labelledby="boat-info-title">
    <h3 id="boat-info-title" class="text-2xl font-semibold mb-6 text-green-900 flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24"
        stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h2l1 2h13l1-2h2" />
      </svg>
      Boat Information
    </h3>
    <dl class="space-y-5 text-green-900 font-semibold text-lg">
      <div class="flex justify-between border-b border-green-300 pb-2">
        <dt>Name:</dt>
        <dd class="truncate max-w-[60%]">{{ reservation.bateau?.nom || 'N/A' }}</dd>
      </div>
      <div class="flex justify-between pt-2">
        <dt>Prix/Jour:</dt>
        <dd class="flex items-baseline gap-1">
          <span>{{ reservation.bateau?.prix || 'N/A' }}</span>
          <span class="text-sm text-gray-500">TND</span>
        </dd>
      </div>
    </dl>
  </section>


  <div class="mt-10 flex justify-center">
    <button (click)="goBack()" class="flex items-center gap-2 px-6 py-2 rounded-lg text-white font-semibold
           bg-gradient-to-r from-blue-500 to-blue-700
           hover:from-blue-600 hover:to-blue-800
           focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-1
           transition duration-200 shadow-md">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Retour
    </button>
  </div>

</div>
