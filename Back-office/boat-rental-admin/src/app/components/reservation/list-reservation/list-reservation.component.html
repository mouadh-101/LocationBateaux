<div class="p-6 bg-green-50 min-h-screen font-sans">
  <h2 class="text-4xl font-extrabold text-blue-900 mb-3 tracking-wide">Les Réservations</h2>


  <!-- Cartes statistiques -->
  <div
  class="flex flex-wrap justify-end gap-6 mb-10
         bg-gray-50 dark:bg-gray-900 p-6 rounded-lg"
>
  <div
    class="flex items-center gap-4 bg-white dark:bg-gray-800 rounded-lg shadow-md px-5 py-3 cursor-default
           hover:shadow-xl transition-shadow duration-300 w-36"
  >
    <div
      class="flex items-center justify-center w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full
             text-blue-700 dark:text-blue-300 text-xl"
    >
      <i class="fas fa-layer-group"></i>
    </div>
    <div>
      <div
        class="text-3xl font-semibold text-gray-900 dark:text-gray-100 leading-none animate-count-up"
      >
        {{ total }}
      </div>
      <div
        class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
      >
        Total
      </div>
    </div>
  </div>

  <div
    class="flex items-center gap-4 bg-white dark:bg-gray-800 rounded-lg shadow-md px-5 py-3 cursor-default
           hover:shadow-xl transition-shadow duration-300 w-36"
  >
    <div
      class="flex items-center justify-center w-12 h-12 bg-yellow-100 dark:bg-yellow-900 rounded-full
             text-yellow-600 dark:text-yellow-300 text-xl"
    >
      <i class="fas fa-hourglass-half"></i>
    </div>
    <div>
      <div
        class="text-3xl font-semibold text-gray-900 dark:text-gray-100 leading-none animate-count-up"
      >
        {{ countByStatus('EN_ATTENTE') }}
      </div>
      <div
        class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
      >
        En attente
      </div>
    </div>
  </div>

  <div
    class="flex items-center gap-4 bg-white dark:bg-gray-800 rounded-lg shadow-md px-5 py-3 cursor-default
           hover:shadow-xl transition-shadow duration-300 w-36"
  >
    <div
      class="flex items-center justify-center w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full
             text-green-600 dark:text-green-300 text-xl"
    >
      <i class="fas fa-check-circle"></i>
    </div>
    <div>
      <div
        class="text-3xl font-semibold text-gray-900 dark:text-gray-100 leading-none animate-count-up"
      >
        {{ acceptedCount }}
      </div>
      <div
        class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
      >
        Acceptées
      </div>
    </div>
  </div>

  <div
    class="flex items-center gap-4 bg-white dark:bg-gray-800 rounded-lg shadow-md px-5 py-3 cursor-default
           hover:shadow-xl transition-shadow duration-300 w-36"
  >
    <div
      class="flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full
             text-red-600 dark:text-red-300 text-xl"
    >
      <i class="fas fa-times-circle"></i>
    </div>
    <div>
      <div
        class="text-3xl font-semibold text-gray-900 dark:text-gray-100 leading-none animate-count-up"
      >
        {{ countByStatus('REFUSER') }}
      </div>
      <div
        class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
      >
        Refusées
      </div>
    </div>
  </div>
</div>


  <!-- Filtres -->
  <div class="flex flex-wrap gap-4 mb-6">
    <button
      (click)="applyFilter('ALL')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'ALL'"
    >
      Toutes ({{ total }})
    </button>
    <button
      (click)="applyFilter('EN_ATTENTE')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'EN_ATTENTE'"
    >
      En Attente
    </button>
    <button
      (click)="applyFilter('ACCEPTER')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'ACCEPTER'"
    >
      Accepter ({{ acceptedCount }})
    </button>
    <button
      (click)="applyFilter('REFUSER')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'REFUSER'"
    >
      Refuser
    </button>
  </div>

  <!-- Tableau avec scroll horizontal sur mobile -->
  <div class="bg-white rounded-xl shadow overflow-x-auto">
    <table class="min-w-full text-sm text-left">
      <thead class="bg-gray-100 text-gray-700 uppercase tracking-wide">
        <tr>
          <th class="px-6 py-3">Bateau</th>
          <th class="px-6 py-3">Client</th>
          <th class="px-6 py-3">Dates</th>
          <th class="px-6 py-3">Durée</th>
          <th class="px-6 py-3">Statut</th>
          <th class="px-6 py-3">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let r of filtered"
          class="border-t hover:bg-gray-50 transition-colors duration-150 cursor-pointer"
        >
          <td class="px-6 py-4 flex items-center gap-4 min-w-[170px]">
            <img
              [src]="r.bateau.images[0]?.url"
              class="w-20 h-14 rounded-lg object-cover shadow-sm"
              *ngIf="r.bateau.images?.length"
              alt="Image bateau"
            >
            <div class="flex flex-col items-start max-w-xs">
  <div class="flex items-center gap-2 text-blue-900 font-semibold truncate">
    <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h11M9 21V3M16 17l5-5m0 0l-5-5m5 5H9" />
    </svg>
    <span class="truncate">{{ r.bateau.nom }}</span>
  </div>
  <div class="text-xs text-gray-400 mt-0.5">ID : #{{ r.bateau.bateauxId }}</div>
</div>

          </td>
           <td class="px-6 py-4 whitespace-nowrap">
  <span class="inline-block px-3 py-1 bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 text-sm font-semibold rounded-xl shadow-sm">
    {{ r.utilisateur.name }}
  </span>
</td>

<td class="px-6 py-4 whitespace-nowrap">
  <div class="inline-flex items-center gap-2 px-3 py-1 bg-yellow-50 text-yellow-700 font-semibold text-sm rounded-xl shadow-sm border border-yellow-200">
    <svg class="w-4 h-4 text-yellow-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
    {{ r.date | date: 'dd MMM yyyy, HH:mm' }}
  </div>
</td>
        <td class="px-6 py-4 whitespace-nowrap">
  <span
    class="inline-block bg-gradient-to-r from-cyan-500 to-cyan-700 text-white px-4 py-1 rounded-full text-xs uppercase font-semibold tracking-wide shadow-md transition-transform duration-200 hover:scale-105 hover:shadow-lg select-none"
  >
    {{ r.typeReservation.replace('_', ' ') }}
  </span>
</td>


          <!-- Statut amélioré avec icône et style -->
          <td class="px-6 py-4 whitespace-nowrap">
            <span
              [ngClass]="{
                'bg-green-100 text-green-700 shadow-md': r.status === 'ACCEPTER',
                'bg-yellow-100 text-yellow-700 shadow-md': r.status === 'EN_ATTENTE',
                'bg-red-100 text-red-700 shadow-md': r.status === 'REFUSER'
              }"
              class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold tracking-wide transition-shadow duration-300 hover:shadow-lg select-none"
            >
              <i
                [class]="
                  r.status === 'ACCEPTER' ? 'fas fa-check-circle text-green-600' :
                  r.status === 'EN_ATTENTE' ? 'fas fa-clock text-yellow-600' :
                  r.status === 'REFUSER' ? 'fas fa-times-circle text-red-600' :
                  'fas fa-question-circle text-gray-600'
                "
              ></i>
              {{ r.status }}
            </span>
          </td>

          <td class="px-6 py-4 flex gap-3 whitespace-nowrap">
            <button
              class="bg-blue-700 hover:bg-blue-800 transition-colors duration-200 text-white p-2 rounded-lg shadow-md"
              aria-label="Voir"
              title="Voir"
              (click)="viewReservation(r)"
            >
              <i class="fas fa-eye"></i>
            </button>
            <button
              class="bg-yellow-500 hover:bg-yellow-600 transition-colors duration-200 text-white p-2 rounded-lg shadow-md"
              aria-label="Modifier"
              title="Modifier"
              (click)="editReservation(r)"
            >
              <i class="fas fa-edit"></i>
            </button>
            <button
              class="bg-cyan-700 hover:bg-cyan-800 transition-colors duration-200 text-white p-2 rounded-lg shadow-md"
              aria-label="Bateau"
              title="Bateau"
              (click)="viewBoat(r.bateau)"
            >
              <i class="fas fa-ship"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="px-6 py-3 text-gray-500 text-sm font-light">
      Affichage de {{ filtered.length }} réservation{{ filtered.length > 1 ? 's' : '' }}
    </div>
  </div>
</div>

<style>
  /* Classes personnalisées pour boutons filtres */
  .btn-filter {
    background-color: #e5e7eb; /* Tailwind gray-200 */
    color: #374151; /* Tailwind gray-700 */
    border: none;
    cursor: pointer;
  }
  .btn-filter:hover {
    background-color: #d1d5db; /* Tailwind gray-300 */
  }
  .btn-filter.active {
    background-color: #2563eb; /* Tailwind blue-600 */
    color: white;
    box-shadow: 0 4px 8px rgb(37 99 235 / 0.4);
  }
</style>

<!--
N’oublie pas d’importer FontAwesome dans index.html pour voir les icônes:

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
-->
