<div class="p-6 bg-green-50 min-h-screen font-sans">
  <h2 class="text-4xl font-extrabold text-blue-900 mb-3 tracking-wide">Les Réservations</h2>


  <!-- Cartes statistiques -->
  <div class="flex flex-wrap justify-end gap-6 mb-8">
    <div class="bg-white p-5 rounded-xl shadow-lg text-center w-24 sm:w-28 md:w-32">
      <div class="text-3xl font-bold text-blue-700">{{ total }}</div>
      <div class="text-sm text-gray-500 uppercase mt-1 tracking-wider">Total</div>
    </div>
    <div class="bg-white p-5 rounded-xl shadow-lg text-center w-24 sm:w-28 md:w-32">
      <div class="text-3xl font-bold text-yellow-600">{{ countByStatus('EN_ATTENTE') }}</div>
      <div class="text-sm text-gray-500 uppercase mt-1 tracking-wider">En attente</div>
    </div>
    <div class="bg-white p-5 rounded-xl shadow-lg text-center w-24 sm:w-28 md:w-32">
      <div class="text-3xl font-bold text-green-600">{{ acceptedCount }}</div>
      <div class="text-sm text-gray-500 uppercase mt-1 tracking-wider">Acceptées</div>
    </div>
    <div class="bg-white p-5 rounded-xl shadow-lg text-center w-24 sm:w-28 md:w-32">
      <div class="text-3xl font-bold text-red-600">{{ countByStatus('REFUSER') }}</div>
      <div class="text-sm text-gray-500 uppercase mt-1 tracking-wider">Refusées</div>
    </div>
  </div>

  <!-- Filtres -->
  <div class="flex flex-wrap gap-4 mb-6">
    <button
      (click)="applyFilter('ALL')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'ALL'"
    >
      Toutes ({{ total }})
    </button>
    <button
      (click)="applyFilter('EN_ATTENTE')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'EN_ATTENTE'"
    >
      En Attente
    </button>
    <button
      (click)="applyFilter('ACCEPTER')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'ACCEPTER'"
    >
      Accepter ({{ acceptedCount }})
    </button>
    <button
      (click)="applyFilter('REFUSER')"
      class="btn-filter px-5 py-2 rounded-full font-semibold transition-colors duration-200"
      [class.active]="currentFilter === 'REFUSER'"
    >
      Refuser
    </button>
  </div>

  <!-- Tableau avec scroll horizontal sur mobile -->
  <div class="bg-white rounded-xl shadow overflow-x-auto">
    <table class="min-w-full text-sm text-left">
      <thead class="bg-gray-100 text-gray-700 uppercase tracking-wide">
        <tr>
          <th class="px-6 py-3">Bateau</th>
          <th class="px-6 py-3">Dates</th>
          <th class="px-6 py-3">Durée</th>
          <th class="px-6 py-3">Statut</th>
          <th class="px-6 py-3">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let r of filtered"
          class="border-t hover:bg-gray-50 transition-colors duration-150 cursor-pointer"
        >
          <td class="px-6 py-4 flex items-center gap-4 min-w-[170px]">
            <img
              [src]="r.bateau.images[0]?.url"
              class="w-20 h-14 rounded-lg object-cover shadow-sm"
              *ngIf="r.bateau.images?.length"
              alt="Image bateau"
            >
            <div class="truncate">
              <div class="font-semibold text-gray-900 truncate max-w-xs">{{ r.bateau.nom }}</div>
              <div class="text-xs text-gray-400 mt-0.5">#{{ r.bateau.bateauxId }}</div>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-gray-800 font-medium">{{ r.date | date: 'dd MMM, HH:mm' }}</td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="bg-cyan-600 text-white px-4 py-1 rounded-full text-xs uppercase font-semibold tracking-wide">
              {{ r.typeReservation.replace('_', ' ') }}
            </span>
          </td>

          <!-- Statut amélioré avec icône et style -->
          <td class="px-6 py-4 whitespace-nowrap">
            <span
              [ngClass]="{
                'bg-green-100 text-green-700 shadow-md': r.status === 'ACCEPTER',
                'bg-yellow-100 text-yellow-700 shadow-md': r.status === 'EN_ATTENTE',
                'bg-red-100 text-red-700 shadow-md': r.status === 'REFUSER'
              }"
              class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold tracking-wide transition-shadow duration-300 hover:shadow-lg select-none"
            >
              <i
                [class]="
                  r.status === 'ACCEPTER' ? 'fas fa-check-circle text-green-600' :
                  r.status === 'EN_ATTENTE' ? 'fas fa-clock text-yellow-600' :
                  r.status === 'REFUSER' ? 'fas fa-times-circle text-red-600' :
                  'fas fa-question-circle text-gray-600'
                "
              ></i>
              {{ r.status }}
            </span>
          </td>

          <td class="px-6 py-4 flex gap-3 whitespace-nowrap">
            <button
              class="bg-blue-700 hover:bg-blue-800 transition-colors duration-200 text-white p-2 rounded-lg shadow-md"
              aria-label="Voir"
              title="Voir"
              (click)="viewReservation(r)"
            >
              <i class="fas fa-eye"></i>
            </button>
            <button
              class="bg-yellow-500 hover:bg-yellow-600 transition-colors duration-200 text-white p-2 rounded-lg shadow-md"
              aria-label="Modifier"
              title="Modifier"
              (click)="editReservation(r)"
            >
              <i class="fas fa-edit"></i>
            </button>
            <button
              class="bg-cyan-700 hover:bg-cyan-800 transition-colors duration-200 text-white p-2 rounded-lg shadow-md"
              aria-label="Bateau"
              title="Bateau"
              (click)="viewBoat(r.bateau)"
            >
              <i class="fas fa-ship"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="px-6 py-3 text-gray-500 text-sm font-light">
      Affichage de {{ filtered.length }} réservation{{ filtered.length > 1 ? 's' : '' }}
    </div>
  </div>
</div>

<style>
  /* Classes personnalisées pour boutons filtres */
  .btn-filter {
    background-color: #e5e7eb; /* Tailwind gray-200 */
    color: #374151; /* Tailwind gray-700 */
    border: none;
    cursor: pointer;
  }
  .btn-filter:hover {
    background-color: #d1d5db; /* Tailwind gray-300 */
  }
  .btn-filter.active {
    background-color: #2563eb; /* Tailwind blue-600 */
    color: white;
    box-shadow: 0 4px 8px rgb(37 99 235 / 0.4);
  }
</style>

<!--
N’oublie pas d’importer FontAwesome dans index.html pour voir les icônes:

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
-->
