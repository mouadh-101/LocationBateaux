<div *ngIf="loading" class="text-blue-500 font-semibold mb-4">Chargement...</div>
<div *ngIf="error" class="text-red-600 font-semibold mb-4">{{ error }}</div>

<form *ngIf="user" (ngSubmit)="updateProfile()" #form="ngForm" novalidate class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-md">

  <!-- Nom -->
  <div class="mb-4">
    <label for="name" class="block text-gray-700 font-medium mb-2">Nom :</label>
    <input
      id="name"
      name="name"
      type="text"
      [(ngModel)]="user.name"
      #name="ngModel"
      required
      minlength="3"
      maxlength="50"
      class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-300"
      [class.border-red-500]="name.invalid && name.touched"
    />
    <div *ngIf="name.invalid && name.touched" class="text-red-600 mt-1 text-sm">
      <small *ngIf="name.errors?.['required']">Le nom est obligatoire.</small>
      <small *ngIf="name.errors?.['minlength']">Minimum 3 caractères.</small>
      <small *ngIf="name.errors?.['maxlength']">Maximum 50 caractères.</small>
    </div>
  </div>

  <!-- Email -->
  <div class="mb-4">
    <label for="email" class="block text-gray-700 font-medium mb-2">Email :</label>
    <input
      id="email"
      name="email"
      type="email"
      [(ngModel)]="user.email"
      #email="ngModel"
      required
      email
      class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 border-gray-300"
      [class.border-red-500]="email.invalid && email.touched"
    />
    <div *ngIf="email.invalid && email.touched" class="text-red-600 mt-1 text-sm">
      <small *ngIf="email.errors?.['required']">L'email est obligatoire.</small>
      <small *ngIf="email.errors?.['email']">Email invalide.</small>
    </div>
  </div>

  <!-- Mot de passe (optionnel, à ajouter si tu veux gérer) -->

  <button
    type="submit"
    [disabled]="form.invalid"
    class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed transition"
  >
    Mettre à jour
  </button>
</form>
