<h2 class="text-4xl font-extrabold text-center text-blue-900 mb-12 tracking-tight drop-shadow">
  Historique des paiements
</h2>

<!-- Boutons Export -->
<div class="flex justify-center gap-6 mb-8">
  <button
    (click)="exportPDF()"
    class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800
           text-white font-semibold rounded-2xl shadow-lg transition-transform transform hover:scale-105"
    aria-label="Exporter en PDF"
  >
    <span class="text-lg">ðŸ“„</span>
    <span>Exporter en PDF</span>
  </button>

  <button
    (click)="exportExcel()"
    class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800
           text-white font-semibold rounded-2xl shadow-lg transition-transform transform hover:scale-105"
    aria-label="Exporter en Excel"
  >
    <span class="text-lg">ðŸ“Š</span>
    <span>Exporter en Excel</span>
  </button>
  
</div>



<!-- RÃ©sumÃ© Statistiques -->
<div class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-3 gap-6 mb-12 text-center">
  <div class="bg-green-100 text-green-800 p-6 rounded-2xl shadow">
    <div class="text-2xl font-bold">{{ totalAcceptes }}</div>
    <div class="text-sm font-semibold">Paiements acceptÃ©s</div>
  </div>
  <div class="bg-yellow-100 text-yellow-800 p-6 rounded-2xl shadow">
    <div class="text-2xl font-bold">{{ totalEnAttente }}</div>
    <div class="text-sm font-semibold">Paiements En attente</div>
  </div>
   <div class="bg-red-100 text-red-800 p-6 rounded-2xl shadow">
    <div class="text-2xl font-bold">{{ totalRefuser }}</div>
    <div class="text-sm font-semibold">Paiements Refuser</div>
  </div>
  <div class="bg-blue-100 text-blue-800 p-6 rounded-2xl shadow ">
    <div class="text-2xl font-bold">{{ montantTotal | number:'1.2-2' }} DT</div>
    <div class="text-sm font-semibold">Montant total payÃ©</div>
  </div>
</div>

<!-- Liste des paiements -->
<div *ngIf="paiements.length === 0" class="text-center text-gray-500 italic mt-20 text-lg">
  Aucun paiement trouvÃ©.
</div>

<ul class="max-w-6xl mx-auto space-y-6 px-4 sm:px-0">
  <li
    *ngFor="let paiement of paiements"
    [ngClass]="{
      'border-l-8 border-green-400 bg-green-50/60': paiement.status === 'ACCEPTER',
      'border-l-8 border-yellow-400 bg-yellow-50/60': paiement.status === 'EN_ATTENTE',
      'border-l-8 border-red-400 bg-red-50/60': paiement.status === 'REFUSER'
    }"
    class="p-6 rounded-2xl shadow-lg transition-transform transform hover:scale-[1.01] hover:shadow-xl duration-300"
  >
    <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 text-gray-800 text-[15px] font-medium mb-4">
      <div>
        <span class="block text-gray-600 font-semibold mb-1">Client</span>
        <span>{{ paiement.reservation?.utilisateur?.name || 'Non disponible' }}</span>
      </div>
      <div>
        <span class="block text-gray-600 font-semibold mb-1">Bateau</span>
        <span>{{ paiement.reservation?.bateau?.nom || 'Non disponible' }}</span>
      </div>
      <div>
        <span class="block text-gray-600 font-semibold mb-1">Date De Paiement</span>
        <span>{{ paiement.datePaiement | date: 'dd/MM/yyyy HH:mm' }}</span>
      </div>
      <div>
        <span class="block text-gray-600 font-semibold mb-1">MÃ©thode De Paiement</span>
        <span class="italic text-gray-700">{{ paiement.methode }}</span>
      </div>
    </div>

    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mt-4 border-t pt-4">
      <span class="text-lg font-bold text-gray-900 tracking-wide">
        {{ paiement.montant | number:'1.2-2' }} <span class="text-sm font-semibold text-blue-600">DT</span>
      </span>

      <span
        class="uppercase font-semibold px-4 py-1 rounded-full text-sm tracking-wide select-none border transition-colors duration-300"
        [ngClass]="{
          'bg-green-500/90 border-green-600 text-white': paiement.status === 'ACCEPTER',
          'bg-yellow-300 border-yellow-500 text-yellow-900': paiement.status === 'EN_ATTENTE',
          'bg-red-500/90 border-red-700 text-white': paiement.status === 'REFUSER'
        }"
      >
        {{ paiement.status }}
      </span>
    </div>
  </li>
</ul>
