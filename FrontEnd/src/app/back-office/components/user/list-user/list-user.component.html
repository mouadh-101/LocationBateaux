<div class="p-6">
 <h2 class="text-center text-[28px] sm:text-[36px] font-semibold text-blue-600 mb-6 leading-tight tracking-tight italic">
  Liste Des Utilisateurs
</h2>



  <!-- FILTRES -->
  <div class="filters-container">
    <input
      type="text"
      [(ngModel)]="filterName"
      placeholder="Rechercher par nom"
      aria-label="Rechercher par nom"
    />
    <select
      [(ngModel)]="filterRole"
      aria-label="Filtrer par rôle"
    >
      <option value="">Tous les rôles</option>
      <option value="CLIENT">Client</option>
      <option value="GESTIONNAIRE">Gestionnaire</option>
      <option value="ADMIN">Admin</option>
    </select>

    <!-- Nouveau filtre Statut avec boutons toggle -->
    <div class="status-toggle" role="group" aria-label="Filtrer par statut">
      <button
        type="button"
        [class.active]="filterBanned === ''"
        (click)="setFilterBanned('')"
      >
        Tous
      </button>
      <button
        type="button"
        [class.active]="filterBanned === 'active'"
        (click)="setFilterBanned('active')"
      >
        Actifs
      </button>
      <button
        type="button"
        [class.active]="filterBanned === 'banned'"
        (click)="setFilterBanned('banned')"
      >
        Bannés
      </button>
    </div>

    <button (click)="resetFilters()">Réinitialiser</button>
  </div>

<div class="flex justify-start mb-4">
  <button routerLink="/admin/users/add"
    class="bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:from-blue-600 hover:via-blue-700 hover:to-blue-800 text-white font-semibold px-5 py-2 rounded-lg shadow-md transition duration-300 ease-in-out flex items-center gap-2">
    <i class="fas fa-plus"></i> Ajouter un utilisateur
  </button>
</div>



  <!-- CARTE UTILISATEURS -->
  <div class="bg-white rounded-xl p-6 shadow-lg">
    <div *ngIf="paginatedUsers.length === 0" class="text-center text-gray-500 py-12">
      Aucun utilisateur trouvé avec les filtres actuels.
    </div>

    <div *ngIf="paginatedUsers.length > 0" class="user-grid">
      <div *ngFor="let user of paginatedUsers" class="user-card" [class.user-banned]="!user.isActive">
        <div>
          <h3>{{ user.name }}</h3>
          <p>{{ user.email }}</p>

          <span
            class="role-badge"
            [ngClass]="{
              'role-client': user.role === 'CLIENT',
              'role-gestionnaire': user.role === 'GESTIONNAIRE',
              'role-admin': user.role === 'ADMIN'
            }"
          >
            {{ user.role }}
          </span>

          <!-- Badge Banni -->
          <span *ngIf="!user.isActive" class="banned-badge">Banni</span>
        </div>

        <div class="action-buttons">
          <ng-container *ngIf="user.isActive">
            <button (click)="editUser(user)" title="Éditer">
              <i class="fas fa-edit"></i>
            </button>
            <button (click)="banUser(user)" title="Bannir" class="action-ban">
              <i class="fas fa-user-slash"></i>
            </button>
            <button (click)="deleteUser(user)" title="Supprimer" class="action-delete">
              <i class="fas fa-trash"></i>
            </button>
          </ng-container>

          <ng-container *ngIf="!user.isActive">
            <button (click)="unbanUser(user)" title="Débannir" class="action-unban">
              <i class="fas fa-user-check"></i>
            </button>
            <button (click)="deleteUser(user)" title="Supprimer" class="action-delete">
              <i class="fas fa-trash"></i>
            </button>
          </ng-container>
        </div>
      </div>
    </div>

    <!-- PAGINATION -->
    <div *ngIf="paginatedUsers.length > 0" class="pagination-container">
      <button (click)="changePage(-1)" [disabled]="page === 1" class="pagination-button">Précédent</button>
      <span class="pagination-info">Page {{ page }} / {{ totalPages }}</span>
      <button (click)="changePage(1)" [disabled]="page === totalPages" class="pagination-button">Suivant</button>
    </div>
  </div>
</div>
