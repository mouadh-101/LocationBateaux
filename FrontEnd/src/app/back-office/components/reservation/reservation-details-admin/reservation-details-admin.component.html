<div *ngIf="loading" class="flex justify-center items-center py-8 text-blue-600 font-semibold" role="alert" aria-live="polite">
  <svg class="animate-spin h-6 w-6 mr-2 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" aria-hidden="true">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
  </svg>
  Loading reservation details...
</div>

<div *ngIf="error" class="max-w-md mx-auto bg-red-100 border border-red-400 text-red-700 rounded-xl p-5 shadow-md text-center font-semibold" role="alert" aria-live="assertive">
  {{ error }}
</div>

<div *ngIf="reservation" class="max-w-4xl mx-auto p-6 bg-white rounded-2xl shadow-md border border-gray-200 transition-transform hover:scale-[1.02] duration-300">

<h2 class="text-center text-[28px] sm:text-[36px] font-semibold text-blue-600 mb-6 leading-tight tracking-tight italic">
  Détails La Reservation
</h2>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-gray-800">

    <!-- Informations Réservation -->
    <div class="bg-blue-50 p-5 rounded-xl border border-blue-200 shadow-sm">
      <h3 class="text-xl font-semibold mb-4 text-blue-700">Informations Réservation</h3>
      <ul class="space-y-4 text-sm font-medium">
        <li class="max-w-xs break-words px-3 py-2 rounded-md bg-blue-50 shadow-inner select-none">
  <span class="block text-gray-600 text-xs font-semibold uppercase tracking-wide mb-1">Date :</span>
  <span class="block text-blue-900 font-semibold text-base leading-tight truncate">{{ reservation.date | date: 'fullDate' }}</span>
  <span class="block text-blue-700 text-xs mt-0.5">{{ reservation.date | date: 'shortTime' }}</span>
</li>

        <li class="flex justify-between items-start border-b border-gray-200 py-2">
  <span class="text-gray-600 text-sm font-medium select-none">Type :</span>
  <span class="text-blue-900 font-semibold text-base">
    {{
      reservation.typeReservation === 'FULL_DAY' ? 'Full Day' :
      reservation.typeReservation === 'HALF_DAY' ? 'Half Day' : 'Two Hours'
    }}
  </span>
</li>

        <li class="flex justify-between items-center border-b border-gray-200 py-2">
  <span class="text-gray-600 text-sm font-medium select-none">Nombre de personnes :</span>
  <span class="text-blue-900 font-semibold">{{ reservation.nbPersonnes }}</span>
</li>

      <li class="flex justify-between items-center py-2 border-b border-gray-100">
  <span class="text-gray-500 text-sm select-none">Statut :</span>
  <span
    class="px-3 py-0.5 rounded-full font-semibold text-xs uppercase tracking-wide whitespace-nowrap"
    [ngClass]="{
      'bg-gray-100 text-gray-600': reservation.status === 'EN_ATTENTE',
      'bg-green-100 text-green-700': reservation.status === 'ACCEPTER',
      'bg-red-100 text-red-700': reservation.status === 'REFUSER'
    }"
  >
    {{ reservation.status }}
  </span>
</li>

      </ul>
    </div>

    <!-- Infos Utilisateur -->
    <div class="bg-green-50 p-5 rounded-xl border border-green-200 shadow-sm">
      <h3 class="text-xl font-semibold mb-4 text-green-700">Informations Client</h3>
      <ul class="space-y-4 text-sm font-medium text-green-900">
     <ul class="space-y-3">
  <li class="flex justify-between items-center border-b border-gray-200 pb-2">
    <span class="text-gray-600 font-medium select-none">Nom :</span>
    <span class="text-gray-900 font-semibold truncate max-w-[60%]">
      {{ reservation.utilisateur.name || 'N/A' }}
    </span>
  </li>
  <li class="flex justify-between items-center border-b border-gray-200 pb-2">
    <span class="text-gray-600 font-medium select-none">Email :</span>
    <span class="text-gray-900 truncate max-w-[60%] break-words">
      {{ reservation.utilisateur.email || 'N/A' }}
    </span>
  </li>
  <li class="flex justify-between items-center">
    <span class="text-gray-600 font-medium select-none">Téléphone :</span>
    <span class="text-gray-900 font-semibold">
      {{ reservation.utilisateur.phone || 'N/A' }}
    </span>
  </li>
</ul>

      </ul>
    </div>

    <!-- Infos Bateau -->
    <div class="bg-yellow-50 p-5 rounded-xl border border-yellow-200 shadow-sm">
  <h3 class="text-xl font-semibold mb-4 text-yellow-700">Informations Bateau</h3>
  <ul class="space-y-4 text-sm font-medium text-yellow-900">
    <li class="flex justify-between items-center">
      <span class="text-gray-600">Nom :</span>
      <span class="text-yellow-900 font-semibold">
        {{ reservation.bateau.nom || 'N/A' }}
      </span>
    </li>
    <li class="flex justify-between items-center">
      <span class="text-gray-600">Prix / Jour :</span>
      <span class="text-yellow-900 font-semibold">
        {{ reservation.bateau.prix || 'N/A' }} TND
      </span>
    </li>
    <li *ngIf="reservation.bateau?.images?.length">
      <span class="block text-gray-600 mb-2">Image :</span>
      <div class="w-full max-w-xs">
        <img
          [src]="reservation.bateau.images[0].url"
          alt="Image bateau"
          class="rounded-lg object-cover w-full shadow-lg border border-yellow-300"
        />
      </div>
    </li>
  </ul>
</div>

  </div>

  <!-- Bouton Retour -->
  <div class="mt-10 text-center">
    <button
      (click)="goBack()"
      class="inline-flex items-center gap-2 px-6 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-800
             text-white font-semibold shadow-lg hover:from-blue-700 hover:to-blue-900
             focus:outline-none focus:ring-4 focus:ring-blue-400 focus:ring-opacity-50
             transition-transform duration-200 hover:scale-105"
      aria-label="Retour"
      title="Retour"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Retour
    </button>
  </div>

</div>
