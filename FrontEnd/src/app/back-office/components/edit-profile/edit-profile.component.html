<div *ngIf="loading" class="text-indigo-600 font-semibold mb-6 text-center animate-pulse">Chargement...</div>
<div *ngIf="error" class="text-red-500 font-semibold mb-6 text-center">{{ error }}</div>

<form *ngIf="user" (ngSubmit)="updateProfile()" #form="ngForm" novalidate
  class="max-w-md mx-auto bg-white p-10 rounded-2xl shadow-xl"
>

  <!-- Nom -->
  <div class="mb-7">
    <label for="name" class="block text-gray-800 font-semibold mb-3 text-lg">Nom :</label>
    <input
      id="name"
      name="name"
      type="text"
      [(ngModel)]="user.name"
      #name="ngModel"
      required
      minlength="3"
      maxlength="50"
      [class.border-red-500]="name.invalid && name.touched"
      class="w-full px-5 py-3 border border-gray-300 rounded-lg shadow-sm
             focus:outline-none focus:ring-4 focus:ring-indigo-300 transition"
    />
    <div *ngIf="name.invalid && name.touched" class="text-red-600 mt-2 text-sm space-y-1">
      <small *ngIf="name.errors?.['required']">Le nom est obligatoire.</small>
      <small *ngIf="name.errors?.['minlength']">Minimum 3 caractères.</small>
      <small *ngIf="name.errors?.['maxlength']">Maximum 50 caractères.</small>
    </div>
  </div>

  <!-- Email -->
  <div class="mb-7">
    <label for="email" class="block text-gray-800 font-semibold mb-3 text-lg">Email :</label>
    <input
      id="email"
      name="email"
      type="email"
      [(ngModel)]="user.email"
      #email="ngModel"
      required
      email
      [class.border-red-500]="email.invalid && email.touched"
      class="w-full px-5 py-3 border border-gray-300 rounded-lg shadow-sm
             focus:outline-none focus:ring-4 focus:ring-indigo-300 transition"
    />
    <div *ngIf="email.invalid && email.touched" class="text-red-600 mt-2 text-sm space-y-1">
      <small *ngIf="email.errors?.['required']">L'email est obligatoire.</small>
      <small *ngIf="email.errors?.['email']">Email invalide.</small>
    </div>
  </div>

  <!-- Bouton -->
  <button
    type="submit"
    [disabled]="form.invalid"
    class="w-full bg-gradient-to-r from-indigo-600 to-indigo-800 text-white py-3 rounded-xl font-semibold
           shadow-md hover:from-indigo-700 hover:to-indigo-900 disabled:opacity-50 disabled:cursor-not-allowed transition"
  >
    Mettre à jour
  </button>

</form>
